<% if (!user) { user = { name: '·∫®n danh', role: 'guest' }; } %>
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Trang qu·∫£n l√Ω h·ªá th·ªëng</title>
  <link rel="stylesheet" href="/css/style.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f4f6f9;
    }
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 200px;
      height: 100vh;
      background-color: #007bdb;
      color: white;
      padding-top: 20px;
    }
    .sidebar a {
      display: block;
      color: white;
      padding: 12px 20px;
      text-decoration: none;
      font-weight: 500;
    }
    .sidebar a:hover {
      background-color: #005fa3;
    }
    .topbar {
      margin-left: 200px;
      background-color: #007bdb;
      color: white;
      padding: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .dashboard {
      margin-left: 200px;
      padding: 20px;
    }
    .card-group {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .card {
      flex: 1;
      min-width: 220px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      padding: 20px;
      text-align: center;
    }
    .card h4 {
      margin: 0 0 8px;
    }
    .section-title {
      margin-top: 30px;
      margin-bottom: 12px;
      font-size: 18px;
      font-weight: bold;
    }
    .stat-blocks {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .block {
      flex: 1;
      min-width: 200px;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <a href="#">POS B√°n H√†ng</a>
    <a href="#" id="home-link">Trang Ch·ªß</a>
    <a href="#" id="order-link">T·∫°o ƒë∆°n h√†ng</a>
    <a href="/products" data-link>S·∫£n ph·∫©m</a>
    <a href="/customer">Kh√°ch h√†ng</a>
    <a href="/import">Nh·∫≠p kho</a>
    <a href="/inventory" data-link>T·ªìn kho</a>
    <a href="#">Doanh s·ªë</a>
    <a href="#">Thu chi</a>
    <a href="/profit" data-link>L·ª£i nhu·∫≠n</a>

    <% if (user?.role === 'owner') { %>
      <a href="/settings">‚öôÔ∏è Thi·∫øt l·∫≠p</a>
    <% } %>
  </div>

  <div class="topbar">
    <div><strong>üíº QU·∫¢N L√ù B√ÅN H√ÄNG VLXD</strong></div>
    <p style="margin-top: 30px; font-weight: 500; color: #e2e6ea;">
      üîê B·∫°n ƒëang ƒëƒÉng nh·∫≠p v·ªõi quy·ªÅn: <strong><%= user?.role %></strong>
    </p>
    <div class="header-bar">
      <div class="user-dropdown">
        <span class="user-name">üî• Xin ch√†o, <b><%= user?.name %></b> (<%= user?.role %>) ‚ñº</span>
        <div class="dropdown-menu">
          <a href="/account">T√†i kho·∫£n</a>
          <a href="/logout">ƒêƒÉng xu·∫•t</a>
        </div>
      </div>
    </div>
  </div>

  <div class="dashboard" id="main-content">
    <div class="card-group">
      <div class="card" style="background:#a0c35a; color:white">
        <h4>üí≥ Ti·ªÅn b√°n h√†ng</h4>
        <div>0</div>
      </div>
      <div class="card" style="background:#3498db; color:white">
        <h4>üõí S·ªë ƒë∆°n h√†ng</h4>
        <div>0</div>
      </div>
      <div class="card" style="background:#e74c3c; color:white">
        <h4>‚Ü©Ô∏è H√†ng kh√°ch tr·∫£</h4>
        <div>0</div>
      </div>
    </div>
    <div class="section-title">üìä Ho·∫°t ƒë·ªông</div>
    <div class="stat-blocks">
      <div class="block">Ti·ªÅn b√°n h√†ng: 0</div>
      <div class="block">S·ªë ƒë∆°n h√†ng: 0</div>
      <div class="block">S·ªë s·∫£n ph·∫©m: 0</div>
      <div class="block">Kh√°ch h√†ng tr·∫£: 0</div>
    </div>
    <div class="section-title">üì¶ Th√¥ng tin kho</div>
    <div class="stat-blocks">
      <div class="block">T·ªìn kho: 0</div>
      <div class="block">H·∫øt h√†ng: 0</div>
      <div class="block">S·∫Øp h·∫øt h√†ng: 0</div>
      <div class="block">V∆∞·ª£t ƒë·ªãnh m·ª©c: 0</div>
    </div>
    <div class="section-title">üè∑Ô∏è Th√¥ng tin s·∫£n ph·∫©m</div>
    <div class="stat-blocks">
      <div class="block">S·∫£n ph·∫©m/Nh√† SX: 6 / 36</div>
      <div class="block">Ch∆∞a l√†m gi√° b√°n: 0</div>
      <div class="block">Ch∆∞a nh·∫≠p gi√° mua: 0</div>
      <div class="block">Ch∆∞a ph√¢n lo·∫°i: 0</div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const createOrderBtn = document.getElementById('create-order-btn');
        if (createOrderBtn) {
          createOrderBtn.addEventListener('click', function () {
            const form = document.getElementById('add-order-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
          });
        }

        const exportExcelBtn = document.getElementById('export-excel');
        if (exportExcelBtn) {
          exportExcelBtn.addEventListener('click', () => {
            alert('Ch·ª©c nƒÉng xu·∫•t Excel ƒëang ph√°t tri·ªÉn!');
          });
        }
      });
    </script>
  </div>

  <script>
    $(document).ready(function() {
      if ($('#order-link').length) {
        $('#order-link').click(function (e) {
          e.preventDefault();
          $.get('/order/partials/order', function (data) {
            $('#main-content').html(data);
          });
        });
      }

      if ($('#home-link').length) {
        $('#home-link').click(function (e) {
          e.preventDefault();
          location.reload();
        });
      }
    });
  </script>
</body>
</html>
