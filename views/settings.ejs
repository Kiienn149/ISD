<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Qu·∫£n l√Ω nh√¢n vi√™n</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="sidebar">
    <a href="/settings" class="active">Thi·∫øt l·∫≠p</a>
    <a href="#">M·∫´u h√≥a ƒë∆°n</a>
  </div>

  <div class="topbar">
    <div>üíº QU·∫¢N L√ù B√ÅN H√ÄNG VLXD</div>
    <p>Xin ch√†o, <%= user.name %> (<%= user.role %>)</p>
  </div>

  <div class="dashboard">
    <h3>Danh s√°ch Nh√¢n vi√™n</h3>
    <a href="/settings/create" class="btn btn-primary">T·∫°o nh√¢n vi√™n</a>
    <table>
      <thead>
        <tr>
          <th>STT</th>
          <th>M√£ nh√¢n vi√™n</th>
          <th>T√™n nh√¢n vi√™n</th>
          <th>Email</th>
          <th>Nh√≥m ng∆∞·ªùi s·ª≠ d·ª•ng</th>
          <th>Tr·∫°ng th√°i</th>
          <th>H√†nh ƒë·ªông</th>
        </tr>
      </thead>
      <tbody>
        <% users.forEach((user, index) => { %>
          <tr>
            <td><%= index + 1 %></td>
            <td><%= user._id %></td>
            <td><%= user.name %></td>
            <td><%= user.email %></td>
            <td><%= user.role %></td>
            <td>
              <!-- Ki·ªÉm tra tr·∫°ng th√°i ho·∫°t ƒë·ªông -->
              <%= user.isActive === 'Ho·∫°t ƒë·ªông' ? 'Ho·∫°t ƒë·ªông' : 'T·∫°m d·ª´ng' %>
            </td>
            <td>
              <a href="/settings/edit/<%= user._id %>">S·ª≠a</a> | 
              <form action="/settings/delete/<%= user._id %>" method="POST" style="display:inline;" onsubmit="confirmDelete(event)">
                <button type="submit">X√≥a</button>
              </form>
            </td>
          </tr>
        <% }); %>
      </tbody>
    </table>
  </div>

  <script>
    // X√°c nh·∫≠n x√≥a nh√¢n vi√™n
    function confirmDelete(event) {
      // Hi·ªÉn th·ªã h·ªôp tho·∫°i x√°c nh·∫≠n
      const isConfirmed = window.confirm('B·∫°n ch·∫Øc ch·∫Øn mu·ªën x√≥a');

      // N·∫øu ng∆∞·ªùi d√πng nh·∫•n "OK", ti·∫øp t·ª•c g·ª≠i form, n·∫øu kh√¥ng, h·ªßy
      if (!isConfirmed) {
        event.preventDefault();  // Ng·ª´ng h√†nh ƒë·ªông x√≥a
      }
    }
  </script>
</body>
</html>
